name: Append Footer Based on Issue Type
permissions:
  issues: write

on:
  issues:
    types: [opened]

jobs:
  append-footer:
    runs-on: ubuntu-latest
    steps:
      - name: Harden the runner (Audit all outbound calls)
        uses: step-security/harden-runner@20cf305ff2072d973412fa9b1e3a4f227bda3c76 # v2.14.0
        with:
          egress-policy: audit

      - name: Append footer for Bugs
        if: ${{ github.event.issue.form.type == 'Bug' }}
        uses: julien-deramond/update-issue-body@04d5de9497fa264075b0d91ba018a73ca5ae5654 # v1
        with:
          issue-number: ${{ github.event.issue.number }}
          edit-mode: append
          append-separator: newline
          body: |
            ---
        
            ### ðŸ’¡ Help Make It Happen!
            
            Want to see this bug fixed faster? Fund its implementation through our **Backer's Bounty** program, where you choose which bug fixes get priority!
            
            [![Donate to Our Collective](https://opencollective.com/himmelblau/donate/button.png?color=blue)](https://himmelblau-idm.org/backers.html#backers-bounty)
            
            For US tax exempt donations:
            
            [![Donate US Tax Exempt](https://www.spi-inc.org/images/paypal_btn_donateCC_LG.gif)](https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=8GYKFLX9UNCH2)
            
            Your support helps drive Himmelblauâ€™s evolution!

      - name: Append footer for Enhancements
        if: ${{ github.event.issue.form.type == 'Enhancement' }}
        uses: julien-deramond/update-issue-body@04d5de9497fa264075b0d91ba018a73ca5ae5654 # v1
        with:
          issue-number: ${{ github.event.issue.number }}
          edit-mode: append
          append-separator: newline
          body: |
            ---
            
            ### ðŸ’¡ Help Make It Happen!
            Want to see this feature developed faster? Fund its implementation through our **Backer's Bounty** program, where you choose which features get priority!
            
            [![Donate to Our Collective](https://opencollective.com/himmelblau/donate/button.png?color=blue)](https://himmelblau-idm.org/backers.html#backers-bounty)
            
            For US tax exempt donations:
            
            [![Donate US Tax Exempt](https://www.spi-inc.org/images/paypal_btn_donateCC_LG.gif)](https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=8GYKFLX9UNCH2)
            
            Your support helps drive Himmelblauâ€™s evolution!
            
            ---
            
            *Thank you for suggesting an enhancement to the Himmelblau project! Your input helps make the project better for everyone.*
